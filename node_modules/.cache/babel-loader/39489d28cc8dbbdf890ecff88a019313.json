{"ast":null,"code":"var renderShapeToContext,\n    renderShapeToSVG,\n    slice,\n    util,\n    slice1 = [].slice;\nslice = Array.prototype.slice;\nrenderShapeToContext = require('./canvasRenderer').renderShapeToContext;\nrenderShapeToSVG = require('./svgRenderer').renderShapeToSVG;\nutil = {\n  addImageOnload: function (img, fn) {\n    var oldOnload;\n    oldOnload = img.onload;\n\n    img.onload = function () {\n      if (typeof oldOnload === \"function\") {\n        oldOnload();\n      }\n\n      return fn();\n    };\n\n    return img;\n  },\n  last: function (array, n) {\n    if (n == null) {\n      n = null;\n    }\n\n    if (n) {\n      return slice.call(array, Math.max(array.length - n, 0));\n    } else {\n      return array[array.length - 1];\n    }\n  },\n  classSet: function (classNameToIsPresent) {\n    var classNames, key;\n    classNames = [];\n\n    for (key in classNameToIsPresent) {\n      if (classNameToIsPresent[key]) {\n        classNames.push(key);\n      }\n    }\n\n    return classNames.join(' ');\n  },\n  matchElementSize: function (elementToMatch, elementsToResize, scale, callback) {\n    var resize;\n\n    if (callback == null) {\n      callback = function () {};\n    }\n\n    resize = function (_this) {\n      return function () {\n        var el, i, len;\n\n        for (i = 0, len = elementsToResize.length; i < len; i++) {\n          el = elementsToResize[i];\n          el.style.width = elementToMatch.offsetWidth + \"px\";\n          el.style.height = elementToMatch.offsetHeight + \"px\";\n\n          if (el.width != null) {\n            el.setAttribute('width', el.offsetWidth * scale);\n            el.setAttribute('height', el.offsetHeight * scale);\n          }\n        }\n\n        return callback();\n      };\n    }(this);\n\n    elementToMatch.addEventListener('resize', resize);\n    window.addEventListener('resize', resize);\n    window.addEventListener('orientationchange', resize);\n    return resize();\n  },\n  combineCanvases: function () {\n    var c, canvas, canvases, ctx, i, j, len, len1;\n    canvases = 1 <= arguments.length ? slice1.call(arguments, 0) : [];\n    c = document.createElement('canvas');\n    c.width = canvases[0].width;\n    c.height = canvases[0].height;\n\n    for (i = 0, len = canvases.length; i < len; i++) {\n      canvas = canvases[i];\n      c.width = Math.max(canvas.width, c.width);\n      c.height = Math.max(canvas.height, c.height);\n    }\n\n    ctx = c.getContext('2d');\n\n    for (j = 0, len1 = canvases.length; j < len1; j++) {\n      canvas = canvases[j];\n      ctx.drawImage(canvas, 0, 0);\n    }\n\n    return c;\n  },\n  renderShapes: function (shapes, bounds, scale, canvas) {\n    var ctx, i, len, shape;\n\n    if (scale == null) {\n      scale = 1;\n    }\n\n    if (canvas == null) {\n      canvas = null;\n    }\n\n    canvas = canvas || document.createElement('canvas');\n    canvas.width = bounds.width * scale;\n    canvas.height = bounds.height * scale;\n    ctx = canvas.getContext('2d');\n    ctx.translate(-bounds.x * scale, -bounds.y * scale);\n    ctx.scale(scale, scale);\n\n    for (i = 0, len = shapes.length; i < len; i++) {\n      shape = shapes[i];\n      renderShapeToContext(ctx, shape);\n    }\n\n    return canvas;\n  },\n  renderShapesToSVG: function (shapes, arg, backgroundColor) {\n    var height, width, x, y;\n    x = arg.x, y = arg.y, width = arg.width, height = arg.height;\n    return (\"<svg xmlns='http://www.w3.org/2000/svg' width='\" + width + \"' height='\" + height + \"' viewBox='0 0 \" + width + \" \" + height + \"'> <rect width='\" + width + \"' height='\" + height + \"' x='0' y='0' fill='\" + backgroundColor + \"' /> <g transform='translate(\" + -x + \", \" + -y + \")'> \" + shapes.map(renderShapeToSVG).join('') + \" </g> </svg>\").replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n  },\n  getBoundingRect: function (rects, width, height) {\n    var i, len, maxX, maxY, minX, minY, rect;\n\n    if (!rects.length) {\n      return {\n        x: 0,\n        y: 0,\n        width: 0 || width,\n        height: 0 || height\n      };\n    }\n\n    minX = rects[0].x;\n    minY = rects[0].y;\n    maxX = rects[0].x + rects[0].width;\n    maxY = rects[0].y + rects[0].height;\n\n    for (i = 0, len = rects.length; i < len; i++) {\n      rect = rects[i];\n      minX = Math.floor(Math.min(rect.x, minX));\n      minY = Math.floor(Math.min(rect.y, minY));\n      maxX = Math.ceil(Math.max(maxX, rect.x + rect.width));\n      maxY = Math.ceil(Math.max(maxY, rect.y + rect.height));\n    }\n\n    minX = width ? 0 : minX;\n    minY = height ? 0 : minY;\n    maxX = width || maxX;\n    maxY = height || maxY;\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  },\n  getDefaultImageRect: function (shapeBoundingRects, explicitSize, margin) {\n    var height, rect, width;\n\n    if (explicitSize == null) {\n      explicitSize = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (margin == null) {\n      margin = {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n\n    width = explicitSize.width, height = explicitSize.height;\n    rect = util.getBoundingRect(shapeBoundingRects, width === 'infinite' ? 0 : width, height === 'infinite' ? 0 : height);\n    rect.x -= margin.left;\n    rect.y -= margin.top;\n    rect.width += margin.left + margin.right;\n    rect.height += margin.top + margin.bottom;\n    return rect;\n  },\n  getBackingScale: function (context) {\n    if (window.devicePixelRatio == null) {\n      return 1;\n    }\n\n    if (!(window.devicePixelRatio > 1)) {\n      return 1;\n    }\n\n    return window.devicePixelRatio;\n  },\n  requestAnimationFrame: (window.requestAnimationFrame || window.setTimeout).bind(window),\n  getGUID: function () {\n    var s4;\n\n    s4 = function () {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    };\n\n    return function () {\n      return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n    };\n  }(),\n  requestAnimationFrame: function (f) {\n    if (window.webkitRequestAnimationFrame) {\n      return window.webkitRequestAnimationFrame(f);\n    }\n\n    if (window.requestAnimationFrame) {\n      return window.requestAnimationFrame(f);\n    }\n\n    if (window.mozRequestAnimationFrame) {\n      return window.mozRequestAnimationFrame(f);\n    }\n\n    return setTimeout(f, 0);\n  },\n  cancelAnimationFrame: function (f) {\n    if (window.webkitCancelRequestAnimationFrame) {\n      return window.webkitCancelRequestAnimationFrame(f);\n    }\n\n    if (window.webkitCancelAnimationFrame) {\n      return window.webkitCancelAnimationFrame(f);\n    }\n\n    if (window.cancelAnimationFrame) {\n      return window.cancelAnimationFrame(f);\n    }\n\n    if (window.mozCancelAnimationFrame) {\n      return window.mozCancelAnimationFrame(f);\n    }\n\n    return clearTimeout(f);\n  }\n};\nmodule.exports = util;","map":{"version":3,"sources":["C:/Users/lukeq/blog/node_modules/literallycanvas/lib/js/core/util.js"],"names":["renderShapeToContext","renderShapeToSVG","slice","util","slice1","Array","prototype","require","addImageOnload","img","fn","oldOnload","onload","last","array","n","call","Math","max","length","classSet","classNameToIsPresent","classNames","key","push","join","matchElementSize","elementToMatch","elementsToResize","scale","callback","resize","_this","el","i","len","style","width","offsetWidth","height","offsetHeight","setAttribute","addEventListener","window","combineCanvases","c","canvas","canvases","ctx","j","len1","arguments","document","createElement","getContext","drawImage","renderShapes","shapes","bounds","shape","translate","x","y","renderShapesToSVG","arg","backgroundColor","map","replace","getBoundingRect","rects","maxX","maxY","minX","minY","rect","floor","min","ceil","getDefaultImageRect","shapeBoundingRects","explicitSize","margin","top","right","bottom","left","getBackingScale","context","devicePixelRatio","requestAnimationFrame","setTimeout","bind","getGUID","s4","random","toString","substring","f","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","module","exports"],"mappings":"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","sourcesContent":["var renderShapeToContext, renderShapeToSVG, slice, util,\n  slice1 = [].slice;\n\nslice = Array.prototype.slice;\n\nrenderShapeToContext = require('./canvasRenderer').renderShapeToContext;\n\nrenderShapeToSVG = require('./svgRenderer').renderShapeToSVG;\n\nutil = {\n  addImageOnload: function(img, fn) {\n    var oldOnload;\n    oldOnload = img.onload;\n    img.onload = function() {\n      if (typeof oldOnload === \"function\") {\n        oldOnload();\n      }\n      return fn();\n    };\n    return img;\n  },\n  last: function(array, n) {\n    if (n == null) {\n      n = null;\n    }\n    if (n) {\n      return slice.call(array, Math.max(array.length - n, 0));\n    } else {\n      return array[array.length - 1];\n    }\n  },\n  classSet: function(classNameToIsPresent) {\n    var classNames, key;\n    classNames = [];\n    for (key in classNameToIsPresent) {\n      if (classNameToIsPresent[key]) {\n        classNames.push(key);\n      }\n    }\n    return classNames.join(' ');\n  },\n  matchElementSize: function(elementToMatch, elementsToResize, scale, callback) {\n    var resize;\n    if (callback == null) {\n      callback = function() {};\n    }\n    resize = (function(_this) {\n      return function() {\n        var el, i, len;\n        for (i = 0, len = elementsToResize.length; i < len; i++) {\n          el = elementsToResize[i];\n          el.style.width = elementToMatch.offsetWidth + \"px\";\n          el.style.height = elementToMatch.offsetHeight + \"px\";\n          if (el.width != null) {\n            el.setAttribute('width', el.offsetWidth * scale);\n            el.setAttribute('height', el.offsetHeight * scale);\n          }\n        }\n        return callback();\n      };\n    })(this);\n    elementToMatch.addEventListener('resize', resize);\n    window.addEventListener('resize', resize);\n    window.addEventListener('orientationchange', resize);\n    return resize();\n  },\n  combineCanvases: function() {\n    var c, canvas, canvases, ctx, i, j, len, len1;\n    canvases = 1 <= arguments.length ? slice1.call(arguments, 0) : [];\n    c = document.createElement('canvas');\n    c.width = canvases[0].width;\n    c.height = canvases[0].height;\n    for (i = 0, len = canvases.length; i < len; i++) {\n      canvas = canvases[i];\n      c.width = Math.max(canvas.width, c.width);\n      c.height = Math.max(canvas.height, c.height);\n    }\n    ctx = c.getContext('2d');\n    for (j = 0, len1 = canvases.length; j < len1; j++) {\n      canvas = canvases[j];\n      ctx.drawImage(canvas, 0, 0);\n    }\n    return c;\n  },\n  renderShapes: function(shapes, bounds, scale, canvas) {\n    var ctx, i, len, shape;\n    if (scale == null) {\n      scale = 1;\n    }\n    if (canvas == null) {\n      canvas = null;\n    }\n    canvas = canvas || document.createElement('canvas');\n    canvas.width = bounds.width * scale;\n    canvas.height = bounds.height * scale;\n    ctx = canvas.getContext('2d');\n    ctx.translate(-bounds.x * scale, -bounds.y * scale);\n    ctx.scale(scale, scale);\n    for (i = 0, len = shapes.length; i < len; i++) {\n      shape = shapes[i];\n      renderShapeToContext(ctx, shape);\n    }\n    return canvas;\n  },\n  renderShapesToSVG: function(shapes, arg, backgroundColor) {\n    var height, width, x, y;\n    x = arg.x, y = arg.y, width = arg.width, height = arg.height;\n    return (\"<svg xmlns='http://www.w3.org/2000/svg' width='\" + width + \"' height='\" + height + \"' viewBox='0 0 \" + width + \" \" + height + \"'> <rect width='\" + width + \"' height='\" + height + \"' x='0' y='0' fill='\" + backgroundColor + \"' /> <g transform='translate(\" + (-x) + \", \" + (-y) + \")'> \" + (shapes.map(renderShapeToSVG).join('')) + \" </g> </svg>\").replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n  },\n  getBoundingRect: function(rects, width, height) {\n    var i, len, maxX, maxY, minX, minY, rect;\n    if (!rects.length) {\n      return {\n        x: 0,\n        y: 0,\n        width: 0 || width,\n        height: 0 || height\n      };\n    }\n    minX = rects[0].x;\n    minY = rects[0].y;\n    maxX = rects[0].x + rects[0].width;\n    maxY = rects[0].y + rects[0].height;\n    for (i = 0, len = rects.length; i < len; i++) {\n      rect = rects[i];\n      minX = Math.floor(Math.min(rect.x, minX));\n      minY = Math.floor(Math.min(rect.y, minY));\n      maxX = Math.ceil(Math.max(maxX, rect.x + rect.width));\n      maxY = Math.ceil(Math.max(maxY, rect.y + rect.height));\n    }\n    minX = width ? 0 : minX;\n    minY = height ? 0 : minY;\n    maxX = width || maxX;\n    maxY = height || maxY;\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  },\n  getDefaultImageRect: function(shapeBoundingRects, explicitSize, margin) {\n    var height, rect, width;\n    if (explicitSize == null) {\n      explicitSize = {\n        width: 0,\n        height: 0\n      };\n    }\n    if (margin == null) {\n      margin = {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n    width = explicitSize.width, height = explicitSize.height;\n    rect = util.getBoundingRect(shapeBoundingRects, width === 'infinite' ? 0 : width, height === 'infinite' ? 0 : height);\n    rect.x -= margin.left;\n    rect.y -= margin.top;\n    rect.width += margin.left + margin.right;\n    rect.height += margin.top + margin.bottom;\n    return rect;\n  },\n  getBackingScale: function(context) {\n    if (window.devicePixelRatio == null) {\n      return 1;\n    }\n    if (!(window.devicePixelRatio > 1)) {\n      return 1;\n    }\n    return window.devicePixelRatio;\n  },\n  requestAnimationFrame: (window.requestAnimationFrame || window.setTimeout).bind(window),\n  getGUID: (function() {\n    var s4;\n    s4 = function() {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    };\n    return function() {\n      return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n    };\n  })(),\n  requestAnimationFrame: function(f) {\n    if (window.webkitRequestAnimationFrame) {\n      return window.webkitRequestAnimationFrame(f);\n    }\n    if (window.requestAnimationFrame) {\n      return window.requestAnimationFrame(f);\n    }\n    if (window.mozRequestAnimationFrame) {\n      return window.mozRequestAnimationFrame(f);\n    }\n    return setTimeout(f, 0);\n  },\n  cancelAnimationFrame: function(f) {\n    if (window.webkitCancelRequestAnimationFrame) {\n      return window.webkitCancelRequestAnimationFrame(f);\n    }\n    if (window.webkitCancelAnimationFrame) {\n      return window.webkitCancelAnimationFrame(f);\n    }\n    if (window.cancelAnimationFrame) {\n      return window.cancelAnimationFrame(f);\n    }\n    if (window.mozCancelAnimationFrame) {\n      return window.mozCancelAnimationFrame(f);\n    }\n    return clearTimeout(f);\n  }\n};\n\nmodule.exports = util;\n"]},"metadata":{},"sourceType":"script"}