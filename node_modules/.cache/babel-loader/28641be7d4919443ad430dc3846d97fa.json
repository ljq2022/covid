{"ast":null,"code":"var Eyedropper,\n    Tool,\n    getPixel,\n    extend = function (child, parent) {\n  for (var key in parent) {\n    if (hasProp.call(parent, key)) child[key] = parent[key];\n  }\n\n  function ctor() {\n    this.constructor = child;\n  }\n\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n  child.__super__ = parent.prototype;\n  return child;\n},\n    hasProp = {}.hasOwnProperty;\n\nTool = require('./base').Tool;\n\ngetPixel = function (ctx, arg) {\n  var pixel, x, y;\n  x = arg.x, y = arg.y;\n  pixel = ctx.getImageData(x, y, 1, 1).data;\n\n  if (pixel[3]) {\n    return \"rgb(\" + pixel[0] + \", \" + pixel[1] + \", \" + pixel[2] + \")\";\n  } else {\n    return null;\n  }\n};\n\nmodule.exports = Eyedropper = function (superClass) {\n  extend(Eyedropper, superClass);\n  Eyedropper.prototype.name = 'Eyedropper';\n  Eyedropper.prototype.iconName = 'eyedropper';\n  Eyedropper.prototype.optionsStyle = 'stroke-or-fill';\n\n  function Eyedropper(lc) {\n    Eyedropper.__super__.constructor.call(this, lc);\n\n    this.strokeOrFill = 'stroke';\n  }\n\n  Eyedropper.prototype.readColor = function (x, y, lc) {\n    var canvas, color, newColor, offset;\n    offset = lc.getDefaultImageRect();\n    canvas = lc.getImage();\n    newColor = getPixel(canvas.getContext('2d'), {\n      x: x - offset.x,\n      y: y - offset.y\n    });\n    color = newColor || lc.getColor('background');\n\n    if (this.strokeOrFill === 'stroke') {\n      return lc.setColor('primary', newColor);\n    } else {\n      return lc.setColor('secondary', newColor);\n    }\n  };\n\n  Eyedropper.prototype.begin = function (x, y, lc) {\n    return this.readColor(x, y, lc);\n  };\n\n  Eyedropper.prototype[\"continue\"] = function (x, y, lc) {\n    return this.readColor(x, y, lc);\n  };\n\n  return Eyedropper;\n}(Tool);","map":{"version":3,"sources":["C:/Users/lukeq/blog/node_modules/literallycanvas/lib/js/tools/Eyedropper.js"],"names":["Eyedropper","Tool","getPixel","extend","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","require","ctx","arg","pixel","x","y","getImageData","data","module","exports","superClass","name","iconName","optionsStyle","lc","strokeOrFill","readColor","canvas","color","newColor","offset","getDefaultImageRect","getImage","getContext","getColor","setColor","begin"],"mappings":"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","sourcesContent":["var Eyedropper, Tool, getPixel,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nTool = require('./base').Tool;\n\ngetPixel = function(ctx, arg) {\n  var pixel, x, y;\n  x = arg.x, y = arg.y;\n  pixel = ctx.getImageData(x, y, 1, 1).data;\n  if (pixel[3]) {\n    return \"rgb(\" + pixel[0] + \", \" + pixel[1] + \", \" + pixel[2] + \")\";\n  } else {\n    return null;\n  }\n};\n\nmodule.exports = Eyedropper = (function(superClass) {\n  extend(Eyedropper, superClass);\n\n  Eyedropper.prototype.name = 'Eyedropper';\n\n  Eyedropper.prototype.iconName = 'eyedropper';\n\n  Eyedropper.prototype.optionsStyle = 'stroke-or-fill';\n\n  function Eyedropper(lc) {\n    Eyedropper.__super__.constructor.call(this, lc);\n    this.strokeOrFill = 'stroke';\n  }\n\n  Eyedropper.prototype.readColor = function(x, y, lc) {\n    var canvas, color, newColor, offset;\n    offset = lc.getDefaultImageRect();\n    canvas = lc.getImage();\n    newColor = getPixel(canvas.getContext('2d'), {\n      x: x - offset.x,\n      y: y - offset.y\n    });\n    color = newColor || lc.getColor('background');\n    if (this.strokeOrFill === 'stroke') {\n      return lc.setColor('primary', newColor);\n    } else {\n      return lc.setColor('secondary', newColor);\n    }\n  };\n\n  Eyedropper.prototype.begin = function(x, y, lc) {\n    return this.readColor(x, y, lc);\n  };\n\n  Eyedropper.prototype[\"continue\"] = function(x, y, lc) {\n    return this.readColor(x, y, lc);\n  };\n\n  return Eyedropper;\n\n})(Tool);\n"]},"metadata":{},"sourceType":"script"}