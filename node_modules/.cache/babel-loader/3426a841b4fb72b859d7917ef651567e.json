{"ast":null,"code":"var Pencil,\n    ToolWithStroke,\n    createShape,\n    extend = function (child, parent) {\n  for (var key in parent) {\n    if (hasProp.call(parent, key)) child[key] = parent[key];\n  }\n\n  function ctor() {\n    this.constructor = child;\n  }\n\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n  child.__super__ = parent.prototype;\n  return child;\n},\n    hasProp = {}.hasOwnProperty;\n\nToolWithStroke = require('./base').ToolWithStroke;\ncreateShape = require('../core/shapes').createShape;\n\nmodule.exports = Pencil = function (superClass) {\n  extend(Pencil, superClass);\n\n  function Pencil() {\n    return Pencil.__super__.constructor.apply(this, arguments);\n  }\n\n  Pencil.prototype.name = 'Pencil';\n  Pencil.prototype.iconName = 'pencil';\n  Pencil.prototype.eventTimeThreshold = 10;\n\n  Pencil.prototype.begin = function (x, y, lc) {\n    this.color = lc.getColor('primary');\n    this.currentShape = this.makeShape();\n    this.currentShape.addPoint(this.makePoint(x, y, lc));\n    return this.lastEventTime = Date.now();\n  };\n\n  Pencil.prototype[\"continue\"] = function (x, y, lc) {\n    var timeDiff;\n    timeDiff = Date.now() - this.lastEventTime;\n\n    if (timeDiff > this.eventTimeThreshold) {\n      this.lastEventTime += timeDiff;\n      this.currentShape.addPoint(this.makePoint(x, y, lc));\n      return lc.drawShapeInProgress(this.currentShape);\n    }\n  };\n\n  Pencil.prototype.end = function (x, y, lc) {\n    lc.saveShape(this.currentShape);\n    return this.currentShape = void 0;\n  };\n\n  Pencil.prototype.makePoint = function (x, y, lc) {\n    return createShape('Point', {\n      x: x,\n      y: y,\n      size: this.strokeWidth,\n      color: this.color\n    });\n  };\n\n  Pencil.prototype.makeShape = function () {\n    return createShape('LinePath');\n  };\n\n  return Pencil;\n}(ToolWithStroke);","map":{"version":3,"sources":["C:/Users/lukeq/blog/node_modules/literallycanvas/lib/js/tools/Pencil.js"],"names":["Pencil","ToolWithStroke","createShape","extend","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","require","module","exports","superClass","apply","arguments","name","iconName","eventTimeThreshold","begin","x","y","lc","color","getColor","currentShape","makeShape","addPoint","makePoint","lastEventTime","Date","now","timeDiff","drawShapeInProgress","end","saveShape","size","strokeWidth"],"mappings":"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","sourcesContent":["var Pencil, ToolWithStroke, createShape,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nToolWithStroke = require('./base').ToolWithStroke;\n\ncreateShape = require('../core/shapes').createShape;\n\nmodule.exports = Pencil = (function(superClass) {\n  extend(Pencil, superClass);\n\n  function Pencil() {\n    return Pencil.__super__.constructor.apply(this, arguments);\n  }\n\n  Pencil.prototype.name = 'Pencil';\n\n  Pencil.prototype.iconName = 'pencil';\n\n  Pencil.prototype.eventTimeThreshold = 10;\n\n  Pencil.prototype.begin = function(x, y, lc) {\n    this.color = lc.getColor('primary');\n    this.currentShape = this.makeShape();\n    this.currentShape.addPoint(this.makePoint(x, y, lc));\n    return this.lastEventTime = Date.now();\n  };\n\n  Pencil.prototype[\"continue\"] = function(x, y, lc) {\n    var timeDiff;\n    timeDiff = Date.now() - this.lastEventTime;\n    if (timeDiff > this.eventTimeThreshold) {\n      this.lastEventTime += timeDiff;\n      this.currentShape.addPoint(this.makePoint(x, y, lc));\n      return lc.drawShapeInProgress(this.currentShape);\n    }\n  };\n\n  Pencil.prototype.end = function(x, y, lc) {\n    lc.saveShape(this.currentShape);\n    return this.currentShape = void 0;\n  };\n\n  Pencil.prototype.makePoint = function(x, y, lc) {\n    return createShape('Point', {\n      x: x,\n      y: y,\n      size: this.strokeWidth,\n      color: this.color\n    });\n  };\n\n  Pencil.prototype.makeShape = function() {\n    return createShape('LinePath');\n  };\n\n  return Pencil;\n\n})(ToolWithStroke);\n"]},"metadata":{},"sourceType":"script"}